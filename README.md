# userscript

## Description

This repo stores a collection of my userscripts. All scripts are bundled by webpack with a custom plugin.

## Getting Started

### Dev script

```
npm install & npm run dev
```

Meta header in userscripts is automatically generated by a custom plugin. In Dev mode, a `[script].dev.user.js` will be generated with meta header and a `fetch` call to load bundled script in order to bypass cache in `@require`. Script installation page will be opened automatically when the meta header changes.

`webpack-dev-server` is configured by default to support live-reload and all script files in `src` directory will be monitored. `nodemon` automatically restarts webpack when config file changes are detected.

### Build script

```
npm install & npm run build
```

Webpack will produce distribution files in `dist` directory according to configuration in `config.entry`.

### Create a new script

Create a new directory in `src` folder, write your script in `index.js` and export the meta header in `meta.js`.

Add directory name into `config.entry` in `config.js`.

Note: An imported library will be directly packed into your distribution files if it's not configured external. To introduce new `@require` dependencies, update `config.externals` in `config.js`.

Run and install the script, everything should work as expected.
